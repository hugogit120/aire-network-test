(this["webpackJsonpaire-network-test"]=this["webpackJsonpaire-network-test"]||[]).push([[0],{41:function(e,t,c){},55:function(e,t,c){},78:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},93:function(e,t,c){},95:function(e,t,c){"use strict";c.r(t);var s=c(0),n=c(1),a=c(42),r=c.n(a),i=c(10),o=(c(55),c(3)),l=c(14);var j=function(e){var t=e.component,c=localStorage.getItem("token");return Object(s.jsx)(o.Route,{render:function(e){return c?Object(s.jsx)(t,Object(l.a)({},e)):Object(s.jsx)(o.Redirect,{to:"/login"})}})},b=c(5),u=c(44),d=c.n(u),h=c(19),f=c.n(h),m="web",O=localStorage.getItem("token"),x=d.a.create({baseURL:"https://dev.perseo.tv/ws"}),v=(c(78),c(45)),p=c.n(v),g=RegExp(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),w=function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),i=Object(b.a)(r,2),l=i[0],j=i[1],u=Object(n.useState)(""),d=Object(b.a)(u,2),h=d[0],O=d[1],v=Object(n.useState)(""),w=Object(b.a)(v,2),N=w[0],k=w[1],y=Object(o.useHistory)();Object(n.useEffect)((function(){h&&!c&&O("")}),[c]);return Object(s.jsx)("div",{className:"br4 ba b--black-10 mv4 w-1 w-50-m w-25-l mw6 shadow-5 center bg-white",children:Object(s.jsxs)("div",{className:"pa4 relative",children:[Object(s.jsxs)("form",{className:"login measure",type:"submit",children:[Object(s.jsxs)("div",{id:"sign_up",className:"ba b--transparent ph0 mh0",children:[Object(s.jsx)("h2",{className:"f1 fw6 ph0 mh0",children:"Inicio de sesi\xf3n"}),Object(s.jsxs)("div",{className:"mt3 flex flex-column items-center",children:[Object(s.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"email",children:"Email"}),Object(s.jsx)("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-70",onChange:function(e){return a(e.target.value)},type:"email",name:"email",id:"email-address"}),h&&Object(s.jsx)("span",{className:"errorMessage",children:h})]}),Object(s.jsxs)("div",{className:"mv3",children:[Object(s.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"password",children:"Contrase\xf1a"}),Object(s.jsx)("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-70",onChange:function(e){return j(p()(e.target.value))},type:"password",name:"password",id:"password"})]})]}),Object(s.jsx)("div",{className:"",children:Object(s.jsx)("button",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",onClick:function(e){if(e.preventDefault(),c&&!g.test(c))return O("Ingresa un correo v\xe1lido");(function(e,t){return x.post("/Login.php",f.a.stringify({user:e,pass:t,device:m})).then((function(e){return e.data}))})(c,l).then((function(e){e.error?k(e.message):(localStorage.setItem("token",e.token),y.push("/"))}))},children:"Iniciar sesi\xf3n"})})]}),N&&Object(s.jsx)("div",{className:"frame",children:Object(s.jsxs)("div",{className:"modal absolute",children:[Object(s.jsx)("img",{src:"http://100dayscss.com/codepen/alert.png",width:"44",height:"38"}),Object(s.jsx)("span",{className:"title",children:"Oh snap!"}),Object(s.jsx)("p",{className:"loginErrorMessage",children:N}),Object(s.jsx)("div",{className:"button",onClick:function(){k("")},children:"Entendido"})]})})]})})},N=c(49),k=c(11),y=c(12),C=c(46),S=(c(83),function(e){var t=Math.floor(e/3600),c=e%3600,s=Math.floor(c/60),n=c%60,a=Math.ceil(n);return"".concat(t,"h : ").concat(s,"m : ").concat(a,"s")}),I=function(e){var t=e.movie,c=t.title,n=t.cover,a=t.duration,r=t.section,o=t.id,l=e.addFavorite,j=e.isFavorite;return Object(s.jsxs)("div",{className:"container mw8 grow bg-white br4 pa2 shadow-3 overflow-hidden",children:[Object(s.jsxs)("div",{className:"movie-cover",children:[Object(s.jsx)(i.b,{to:"player/".concat(o),children:Object(s.jsx)("img",{className:"mt0 br4",src:n,width:"300",height:"300"})}),Object(s.jsx)("div",{className:"w6 f7",children:Object(s.jsx)("h2",{children:c})})]}),Object(s.jsxs)("div",{className:"flex w-100 pl4 justify-between f6",children:[Object(s.jsxs)("div",{className:"flex flex-column items-start ",children:[Object(s.jsx)("p",{className:"b",children:r}),Object(s.jsxs)("div",{children:[Object(s.jsx)(k.a,{icon:y.a}),Object(s.jsx)("small",{className:"ml2",children:S(a)})]})]}),Object(s.jsx)("div",{className:"w-20 pointer flex justify-center items-center",onClick:function(){return l(o)},children:Object(s.jsx)(k.a,{className:"f2",color:"red",icon:j?y.b:C.a})})]})]})},E=function(e){var t=e.searchChange,c=e.categoryHandler,n=e.categories;return Object(s.jsxs)("div",{className:"pa2 mb5 flex justify-center items-center",children:[Object(s.jsx)("div",{className:"mr5",children:Object(s.jsx)("input",{className:"pa3 ba bg-light-gray gray tc",placeholder:"Busca tu peli",type:"search",onChange:t})}),Object(s.jsx)("div",{children:Object(s.jsxs)("select",{className:"bg-light-gray gray",onChange:c,children:[Object(s.jsx)("option",{selected:"",value:"",children:"todos los generos"}),n.map((function(e){return Object(s.jsx)("option",{value:e,children:e})}))]})})]})},F=(c(84),function(e){var t=e.userInfo,c=Object(o.useHistory)();return Object(s.jsxs)("div",{className:"flex flex-column items-center userCard bg-black absolute z-1 pa2 white",children:[Object(s.jsx)("div",{className:"br-100 w4 h4 bg-gray",children:Object(s.jsx)("img",{className:"mt3",src:t.avatar,width:"100",height:"100"})}),Object(s.jsx)("h1",{children:t.name}),Object(s.jsxs)("p",{children:["pelis favoritas: ",t.favs.length]}),Object(s.jsx)("button",{onClick:function(){localStorage.removeItem("token"),c.push("/login")},children:" cerrar sesion "})]})}),P=function(e){var t=e.toggleFavoriteView,c=e.favoritesView,n=e.toggleUserInfo,a=e.setUserToggle,r=e.userInfo;return Object(s.jsx)("div",{className:"bg-black-90 fixed top-0 w-100 ph3 pb4 pv4-ns ph4-m ph5-l shadow-3 bb b--white z-1",children:Object(s.jsxs)("nav",{className:"flex justify-between items-center f6 fw6 ttu tracked",children:[Object(s.jsxs)("div",{className:"w5 flex justify-around",children:[Object(s.jsx)("a",{className:c?"link dim red dib mr3":"link dim white dib mr3",href:"#",onClick:function(){return!c&&t(!0)},children:"Mis favoritas"}),Object(s.jsx)("a",{className:c?"link dim white dib mr3":"link dim red dib mr3",href:"#",onClick:function(){return c&&t(!1)},children:"Peliculas"})]}),Object(s.jsxs)("div",{className:"",children:[Object(s.jsx)("a",{className:"link dim white dib mr5",href:"#",onClick:function(){return a(!n)},children:Object(s.jsx)(k.a,{className:"f3",color:"white",icon:y.d})}),n?Object(s.jsx)(F,{userInfo:r}):null]})]})})},R=function(){return Object(s.jsx)("div",{className:"flex justify-center items-center vh-100",children:Object(s.jsx)(k.a,{spin:!0,icon:y.c,className:" f1"})})},V=(c(85),function(e){var t=Object(n.useState)([]),c=Object(b.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)(""),o=Object(b.a)(i,2),j=o[0],u=o[1],d=Object(n.useState)({}),h=Object(b.a)(d,2),v=h[0],p=h[1],g=Object(n.useState)(!1),w=Object(b.a)(g,2),k=w[0],y=w[1],C=Object(n.useState)(!1),S=Object(b.a)(C,2),F=S[0],V=S[1],H=Object(n.useState)(!1),L=Object(b.a)(H,2),M=L[0],U=L[1],z=Object(n.useState)(""),B=Object(b.a)(z,2),T=B[0],A=B[1];Object(n.useEffect)((function(){U(!0),x.post("/GetView.php",f.a.stringify({device:m,token:O})).then((function(e){return e.data})).then((function(e){U(!1),r(e.contents),p(e.user)})).catch((function(t){U(!1),e.history.push("/error")}))}),[]);var J=function(e){var t=v.favs;if(t.includes(e)){var c=t.filter((function(t){return t!==e}));p(Object(l.a)(Object(l.a)({},v),{},{favs:c}))}else t.push(e),p(Object(l.a)(Object(l.a)({},v),{},{favs:t}))},Z=a.filter((function(e){return e.id.includes(j)||e.title.toLowerCase().includes(j.toLowerCase())}));if(k&&v.favs&&(Z=Z.filter((function(e){return v.favs.includes(e.id)}))),T&&(Z=Z.filter((function(e){return e.section.toLowerCase()===T.toLowerCase()}))),M)return Object(s.jsx)(R,{});var D=Object(N.a)(new Set(a.map((function(e){return e.section}))));return Object(s.jsxs)("div",{children:[Object(s.jsx)(P,{userInfo:v,toggleUserInfo:F,setUserToggle:V,favoritesView:k,toggleFavoriteView:y}),Object(s.jsxs)("div",{className:"mainView  overflow-y-auto",children:[Object(s.jsx)(E,{categories:D,searchChange:function(e){u(e.target.value)},categoryHandler:function(e){var t=e.target.value;A(t)}}),Object(s.jsx)("div",{className:"movie-container flex flex-wrap align-center justify-center",children:Z.map((function(e,t){return Object(s.jsx)(I,{addFavorite:J,movie:e,isFavorite:v.favs&&v.favs.some((function(t){return e.id===t}))},t)}))})]})]})}),H=c(47),L=c.n(H),M=c(48),U=function(){var e=Object(M.useParams)().id,t=Object(o.useHistory)(),c=Object(n.useState)({}),a=Object(b.a)(c,2),r=a[0],i=a[1],l=Object(n.useState)(!1),j=Object(b.a)(l,2),u=j[0],d=j[1];return Object(n.useEffect)((function(){d(!0),function(e){return x.post("/Play.php",f.a.stringify({device:m,token:O,id:e})).then((function(e){return e.data}))}(e).then((function(e){d(!1),i(e)})).catch((function(e){d(!1),t.push("/error")}))}),[]),u?Object(s.jsx)(R,{}):Object(s.jsx)("div",{className:"bg-black flex justify-center vh-100 pt5",children:Object(s.jsx)(L.a,{url:r.url,width:"70%",height:"70%",controls:!0})})},z=(c(41),function(e){return Object(s.jsx)("div",{className:"unknowPage",children:Object(s.jsxs)("div",{className:"errorPage-Text",children:[Object(s.jsx)("h2",{children:"P\xe1gina no encontrada"}),Object(s.jsx)("h1",{children:"404"}),Object(s.jsx)("button",{className:"backHomeButton",onClick:function(){e.history.push("/")},children:"Volver"})]})})}),B=function(e){return Object(s.jsx)("div",{className:"unknowPage",children:Object(s.jsxs)("div",{className:"errorPage-Text",children:[Object(s.jsx)("h2",{children:"Lo sentimos, ha habido un error"}),Object(s.jsx)("h1",{children:"500"}),Object(s.jsx)("button",{className:"backHomeButton",onClick:function(){e.history.push("/")},children:"Volver"})]})})};c(93);var T=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)(o.Switch,{children:[Object(s.jsx)(o.Route,{path:"/login",exact:!0,component:w}),Object(s.jsx)(o.Route,{path:"/player/:id",exact:!0,component:U}),Object(s.jsx)(o.Route,{path:"/error",exact:!0,component:B}),Object(s.jsx)(j,{path:"/",exact:!0,component:V}),Object(s.jsx)(o.Route,{component:z})]})})};c(94);r.a.render(Object(s.jsx)(i.a,{children:Object(s.jsx)(T,{})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.36724253.chunk.js.map